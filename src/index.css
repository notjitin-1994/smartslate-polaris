@import './styles/animations.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg: 2 12 27; /* #020C1B */
    --card: 13 27 42; /* #0d1b2a */
    --text: 224 224 224; /* #e0e0e0 */
    --text-muted: 176 197 198; /* #b0c5c6 */
    --text-disabled: 122 138 139; /* #7a8a8b */
    /* Brand tokens from style guide */
    --primary: 167 218 219; /* #a7dadb (teal primary) */
    --primary-light: 208 237 240; /* #d0edf0 */
    --primary-dark: 123 197 199; /* #7bc5c7 */
    --secondary: 79 70 229; /* #4F46E5 (indigo secondary) */
    --secondary-light: 124 105 245; /* #7C69F5 */
    --secondary-dark: 55 48 163; /* #3730A3 */
    /* Use brand teal as the browser/control accent */
    accent-color: rgb(var(--primary));
  }

  html, body, #root {
    height: 100%;
  }

  body {
    @apply bg-[rgb(var(--bg))] text-[rgb(var(--text))] antialiased font-sans;
  }

  /* Brand-colored text selection */
  ::selection {
    background-color: rgb(var(--primary) / 0.8);
    color: rgb(var(--bg));
  }
  ::-moz-selection {
    background-color: rgb(var(--primary) / 0.8);
    color: rgb(var(--bg));
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-bold;
  }
  
  /* List styling to ensure visibility */
  ul, ol {
    list-style-position: outside;
    margin-left: 1.5rem;
    margin-bottom: 1rem;
  }
  
  ul {
    list-style-type: disc;
  }
  
  ol {
    list-style-type: decimal;
  }
  
  li {
    margin-bottom: 0.25rem;
    line-height: 1.5;
  }
  
  /* Table styling */
  table {
    border-collapse: collapse;
    width: 100%;
    margin: 1rem 0;
  }
  
  th, td {
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 0.5rem 0.75rem;
    text-align: left;
  }
  
  th {
    background-color: rgba(255, 255, 255, 0.05);
    font-weight: 600;
  }
  
  /* Ensure list markers are visible in dark theme */
  ul li::marker {
    color: rgb(var(--primary));
  }
  
  ol li::marker {
    color: rgb(var(--primary));
    font-weight: 500;
  }
  
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
  }
}

@layer components {
  .card {@apply bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl;}
  /* Refined glass card with gradient border and deeper blur */
  .glass-card {
    position: relative;
    border-radius: 1rem; /* 16px */
    background: 
      linear-gradient(rgba(13,27,42,0.55), rgba(13,27,42,0.55)) padding-box,
      linear-gradient(135deg, rgba(255,255,255,0.22), rgba(255,255,255,0.06)) border-box;
    border: 1px solid transparent;
    box-shadow: 0 8px 40px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.06);
    -webkit-backdrop-filter: blur(18px);
    backdrop-filter: blur(18px);
  }
  .input {@apply w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder-white/40 outline-none ring-0 focus:ring-[1.2px] focus:ring-primary-400 focus:border-primary-400 transition;}
  /* Brand-compliant native select styling (dark, glassy) */
  select.input {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    color-scheme: dark;
    background-color: rgba(255,255,255,0.05);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 20 20' fill='%23a7dadb'%3E%3Cpath fill-rule='evenodd' d='M5.23 7.21a.75.75 0 011.06.02L10 11.086l3.71-3.856a.75.75 0 111.08 1.04l-4.24 4.406a.75.75 0 01-1.08 0L5.25 8.27a.75.75 0 01-.02-1.06z' clip-rule='evenodd'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px 16px;
    padding-right: 2.25rem; /* make room for chevron */
  }
  select.input:hover { background-color: rgba(255,255,255,0.08); }
  select.input:focus { background-color: rgba(255,255,255,0.10); }
  select.input:disabled { opacity: 0.6; cursor: not-allowed; }
  /* Attempt to theme option list where supported */
  select.input option { background-color: rgb(13 27 42); color: rgb(224 224 224); }
  /* Hide legacy IE arrow */
  select.input::-ms-expand { display: none; }
  .btn-primary {@apply inline-flex items-center justify-center rounded-xl bg-secondary-500 px-4 py-3 text-sm font-medium text-white hover:bg-secondary-600 active:bg-secondary-600 disabled:opacity-50 disabled:cursor-not-allowed transition;}
  .btn-ghost {@apply inline-flex items-center justify-center rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition;}
  /* Icon-only buttons (Material-inspired) */
  .icon-btn { @apply inline-flex items-center justify-center rounded-full border border-white/10 bg-white/5 text-white/80 hover:bg-white/10 hover:text-white active:bg-white/10 transition focus:outline-none focus:ring-2 focus:ring-primary-400/60; width: 36px; height: 36px; }
  .icon-btn.icon-btn-sm { width: 32px; height: 32px; }
  .icon-btn.icon-btn-lg { width: 44px; height: 44px; }
  .icon-btn-primary { @apply bg-secondary-500 hover:bg-secondary-600 text-white border-0; }
  .icon-btn-ghost { @apply bg-white/5 hover:bg-white/10 text-white/85; }
  .icon-btn:disabled { @apply opacity-50 cursor-not-allowed; }
  .tab {@apply relative flex-1 text-center py-2 text-sm font-medium text-primary-500 transition;}
  .tab-active {@apply text-primary-500;}
  /* Micro-interactions */
  .pressable { transition: transform 220ms cubic-bezier(0.22,1,0.36,1), filter 220ms ease, background-color 180ms ease; will-change: transform; transform: translateZ(0); }
  .pressable:hover { transform: translateY(-2px); }
  .pressable:active { transform: translateY(0) scale(0.98); }
  /* Mobile-friendly stepper container */
  .stepper-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }
  .elevate { box-shadow: 0 6px 24px rgba(0,0,0,0.18), 0 2px 8px rgba(0,0,0,0.12); transition: box-shadow 220ms ease; }
  .elevate:hover { box-shadow: 0 10px 30px rgba(0,0,0,0.22), 0 6px 16px rgba(0,0,0,0.16); }

  /* Page and element enter animations (respect motion settings via utility usage) */
  .page-enter { animation: fadeInUp 300ms ease-out; }

  /* Simple skeleton shimmer for loading placeholders */
  .skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.04) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.04) 63%); background-size: 400% 100%; animation: shimmer 1.8s linear infinite; }

  /* Animation delay utilities */
  .animate-delay-75 { animation-delay: 75ms; }
  .animate-delay-150 { animation-delay: 150ms; }
  .animate-delay-300 { animation-delay: 300ms; }
  .animate-delay-500 { animation-delay: 500ms; }
  /* Subtle radial spotlight that follows cursor */
  .interactive-spotlight {
    position: absolute;
    inset: -1px;
    pointer-events: none;
    background: radial-gradient(240px 240px at var(--x, 50%) var(--y, 50%), rgba(255,255,255,0.08), rgba(255,255,255,0.02) 40%, transparent 70%);
    opacity: 0;
    transition: opacity 200ms ease;
  }
  /* Smooth width transitions for charts/bars */
  .bar-smooth { transition: width 600ms cubic-bezier(0.22,1,0.36,1); }
  .bar-smooth-slow { transition: width 900ms cubic-bezier(0.22,1,0.36,1); }
  /* Subtle shimmer overlay for timeline bars */
  .bar-shimmer { position: relative; overflow: hidden; }
  .bar-shimmer::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.18), transparent);
    transform: translateX(-100%);
    animation: barShimmer 2.2s infinite;
  }
  .group:hover > .interactive-spotlight { opacity: 1; }
  .swirl-item {
    transition: transform 420ms cubic-bezier(0.22,1,0.36,1), filter 420ms ease;
    transform: var(--t);
    filter: saturate(1) drop-shadow(0 0 10px rgba(var(--primary), 0.12)) drop-shadow(0 0 26px rgba(var(--primary), 0.08));
    will-change: transform;
    pointer-events: none;
  }
  /* Logo glow */
  .logo-glow {
    filter: drop-shadow(0 0 0 rgba(var(--primary), 0));
    transition: filter 360ms ease;
  }
  .logo-glow:hover {
    filter: drop-shadow(0 0 14px rgba(var(--primary), 0.45));
  }
  .swirl-pattern {
    position: absolute;
    inset: 0;
    background-image: url('/images/logos/logo-swirl.png');
    background-repeat: repeat;
    background-size: 64px 64px;
    opacity: 0.07;
    pointer-events: none;
  }

  /* Brand accent utilities */
  .accent-text { color: rgb(var(--primary)); }
  .accent-text-soft { color: rgb(var(--primary) / 0.85); }
  .accent-icon { color: rgb(var(--primary)); filter: drop-shadow(0 0 0 rgba(var(--primary), 0)); transition: color 200ms ease, filter 260ms ease; }
  .accent-icon:hover { filter: drop-shadow(0 0 10px rgba(var(--primary), 0.35)); }
  .underline-accent { text-decoration: underline; text-decoration-color: rgb(var(--primary)); text-underline-offset: 3px; }
  /* Align headings with body text while keeping the accent rule in the left gutter */
  .heading-accent { position: relative; padding-left: 0; }
  .heading-accent::before {
    content: "";
    position: absolute;
    left: -0.75rem; /* place the accent in the gutter instead of shifting the text */
    top: 0.35em;
    bottom: 0.35em;
    width: 3px;
    background: linear-gradient(to bottom, rgba(var(--primary),0.95), rgba(var(--primary),0.45));
    border-radius: 9999px;
  }

  /* Calmer reading surface for dense text content */
  .read-surface {
    position: relative;
    border-radius: 1rem;
    background:
      linear-gradient(rgba(13,27,42,0.48), rgba(13,27,42,0.48)) padding-box,
      linear-gradient(135deg, rgba(255,255,255,0.14), rgba(255,255,255,0.04)) border-box;
    border: 1px solid transparent;
    box-shadow: 0 6px 28px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.04);
    -webkit-backdrop-filter: blur(14px);
    backdrop-filter: blur(14px);
  }

  /* Sticky column helper for side content */
  .sticky-col { position: sticky; top: 6rem; align-self: start; }

  /* Enhanced Profile Card Animations */
  .profile-card-hover {
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .profile-card-hover:hover {
    transform: translateY(-4px);
    box-shadow: 0 32px 64px rgba(0, 0, 0, 0.4);
  }

  /* Avatar glow animation */
  .avatar-glow {
    animation: avatarGlow 3s ease-in-out infinite alternate;
  }
  
  /* Status indicator pulse */
  .status-pulse {
    animation: statusPulse 2s ease-in-out infinite;
  }

  /* Floating action button */
  .float-button {
    animation: floatButton 3s ease-in-out infinite;
  }

  /* Staggered entrance animation for social buttons */
  .stagger-in {
    opacity: 0;
    transform: translateY(20px);
    animation: staggerIn 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
  
  .stagger-in:nth-child(1) { animation-delay: 0.1s; }
  .stagger-in:nth-child(2) { animation-delay: 0.2s; }
  .stagger-in:nth-child(3) { animation-delay: 0.3s; }
  .stagger-in:nth-child(4) { animation-delay: 0.4s; }
  .stagger-in:nth-child(5) { animation-delay: 0.5s; }
  .stagger-in:nth-child(6) { animation-delay: 0.6s; }

  /* Copy button success feedback */
  .copy-success {
    animation: copySuccess 0.6s ease-out;
  }

  /* Enhanced gradient text */
  .gradient-text-animated {
    background: linear-gradient(-45deg, #ffffff, #a7dadb, #7bc5c7, #4F46E5);
    background-size: 400% 400%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gradientShift 4s ease-in-out infinite;
  }
}

@layer utilities {
  /* Hide native number input spinners (Chrome, Safari, Edge, Firefox) */
  .input-no-spinner::-webkit-outer-spin-button,
  .input-no-spinner::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  .input-no-spinner[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
  }
  /* Cross-browser hide scrollbar while preserving scroll */
  .hide-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  /* Brand-styled scrollbar for editor content */
  .brand-scroll {
    scrollbar-width: thin;
    scrollbar-color: rgba(var(--primary), 0.55) rgba(255,255,255,0.06);
  }
  .brand-scroll::-webkit-scrollbar {
    width: 8px;
  }
  .brand-scroll::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.06);
    border-radius: 4px;
  }
  .brand-scroll::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(var(--primary),0.85), rgba(var(--primary),0.55));
    border-radius: 4px;
    border: 2px solid rgba(255,255,255,0.06);
  }
  .brand-scroll::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, rgba(var(--primary),0.95), rgba(var(--primary),0.75));
  }
  
  /* Report content styling */
  .needs-analysis-report-content {
    /* Ensure proper list display */
    ul, ol {
      list-style-position: outside;
      margin-left: 1.5rem;
      margin-bottom: 1rem;
      padding-left: 0;
    }
    
    ul {
      list-style-type: disc;
    }
    
    ol {
      list-style-type: decimal;
    }
    
    li {
      margin-bottom: 0.5rem;
      line-height: 1.6;
      color: rgb(var(--text));
    }
    
    /* Ensure list markers are visible */
    ul li::marker {
      color: rgb(var(--primary));
      font-weight: 500;
    }
    
    ol li::marker {
      color: rgb(var(--primary));
      font-weight: 600;
    }
    
    /* Table styling for reports */
    table {
      border-collapse: collapse;
      width: 100%;
      margin: 1.5rem 0;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 0.5rem;
      overflow: hidden;
    }
    
    th, td {
      border: 1px solid rgba(255, 255, 255, 0.15);
      padding: 0.75rem 1rem;
      text-align: left;
    }
    
    th {
      background: rgba(var(--primary), 0.1);
      color: rgb(var(--primary));
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.875rem;
      letter-spacing: 0.05em;
    }
    
    td {
      color: rgb(var(--text));
      background: rgba(255, 255, 255, 0.02);
    }
    
    tr:hover td {
      background: rgba(255, 255, 255, 0.05);
    }
    
    /* Code blocks */
    code {
      background: rgba(var(--primary), 0.1);
      color: rgb(var(--primary));
      padding: 0.125rem 0.25rem;
      border-radius: 0.25rem;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.875em;
    }
    
    /* Headings */
    h1, h2, h3, h4, h5, h6 {
      color: rgb(var(--text));
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    
    h1 {
      font-size: 2rem;
      border-bottom: 2px solid rgba(var(--primary), 0.3);
      padding-bottom: 0.5rem;
    }
    
    h2 {
      font-size: 1.5rem;
      border-bottom: 1px solid rgba(var(--primary), 0.2);
      padding-bottom: 0.25rem;
    }
    
    h3 {
      font-size: 1.25rem;
      color: rgb(var(--primary));
    }
    
    /* Paragraphs */
    p {
      margin-bottom: 1rem;
      line-height: 1.6;
      color: rgb(var(--text));
    }
    
    /* Strong and emphasis */
    strong, b {
      color: rgb(var(--primary-light));
      font-weight: 600;
    }
    
    em, i {
      color: rgb(var(--text-muted));
      font-style: italic;
    }
  }
  .hide-scrollbar::-webkit-scrollbar { /* Chrome, Safari */
    display: none;
    width: 0;
    height: 0;
  }

  /* Subtle right-edge fade to indicate more content */
  .fade-right {
    position: absolute;
    right: 0;
    top: 0.5rem;
    bottom: 0.5rem;
    width: 28px;
    pointer-events: none;
    background: linear-gradient(to right, rgba(2,12,27,0), rgba(2,12,27,0.75));
    border-top-right-radius: 0.75rem;
    border-bottom-right-radius: 0.75rem;
  }
  /* Animation keyframes */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes avatarGlow {
    0% {
      box-shadow: 0 0 20px rgba(167, 218, 219, 0.3);
    }
    100% {
      box-shadow: 0 0 40px rgba(167, 218, 219, 0.6), 0 0 80px rgba(79, 70, 229, 0.2);
    }
  }

  @keyframes statusPulse {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);
    }
    50% {
      transform: scale(1.1);
      box-shadow: 0 0 16px rgba(34, 197, 94, 0.8);
    }
  }

  @keyframes floatButton {
    0%, 100% {
      transform: translateY(0) translateX(-50%);
    }
    50% {
      transform: translateY(-6px) translateX(-50%);
    }
  }

  @keyframes staggerIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes copySuccess {
    0% {
      transform: scale(1);
      color: rgba(255, 255, 255, 0.5);
    }
    50% {
      transform: scale(1.2);
      color: rgba(34, 197, 94, 1);
    }
    100% {
      transform: scale(1);
      color: rgba(255, 255, 255, 0.5);
    }
  }

  @keyframes gradientShift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  @keyframes shimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
  @keyframes barShimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  /* Custom scrollbar styles for Lodestar */
  .custom-scroll {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
  }
  
  .custom-scroll::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scroll::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .custom-scroll::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    border: transparent;
  }
  
  .custom-scroll::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.3);
  }

  /* Floating action button animations */
  @keyframes floatShadow {
    0%, 100% {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), 0 2px 10px rgba(0, 0, 0, 0.22);
    }
    50% {
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 0 4px 15px rgba(0, 0, 0, 0.25);
    }
  }

  @keyframes ripple {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    100% {
      transform: scale(4);
      opacity: 0;
    }
  }

  .fab-shadow {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), 0 2px 10px rgba(0, 0, 0, 0.22);
    transition: box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  .fab-shadow:hover {
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 0 4px 15px rgba(0, 0, 0, 0.25);
  }

  /* Neon glow effect for star icons */
  .neon-glow {
    filter: drop-shadow(0 0 8px rgba(167, 218, 219, 0.8)) 
            drop-shadow(0 0 16px rgba(167, 218, 219, 0.6))
            drop-shadow(0 0 24px rgba(167, 218, 219, 0.4));
    animation: neonPulse 2s ease-in-out infinite;
  }

  @keyframes neonPulse {
    0%, 100% {
      filter: drop-shadow(0 0 8px rgba(167, 218, 219, 0.8)) 
              drop-shadow(0 0 16px rgba(167, 218, 219, 0.6))
              drop-shadow(0 0 24px rgba(167, 218, 219, 0.4));
    }
    50% {
      filter: drop-shadow(0 0 12px rgba(167, 218, 219, 1)) 
              drop-shadow(0 0 20px rgba(167, 218, 219, 0.8))
              drop-shadow(0 0 28px rgba(167, 218, 219, 0.6));
    }
  }
}
